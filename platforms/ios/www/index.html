<!DOCTYPE html>
<html>
  <head>
    <meta name="format-detection" content="telephone=yes">
    <meta charset="utf-8" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1" />
    <title>To The Trails</title>
    <link rel="stylesheet" type="text/css" href="css/lib/normalize/normalize.css">
    <link rel="stylesheet" type="text/css" href="js/lib/leaflet/leaflet.css">
    <link rel="stylesheet/less" type="text/css" href="less/application.less"/>
    <script type="text/javascript" src="js/lib/less/less.min.js"></script>
  </head>

  <body ng-controller='AppCtrl'>

    <div id="main">
      <div id="status"></div>

      <div id="map-view">

        <div id="map-search">
          <a href="#" class="control" ng-click="show('search');">
            <img src="img/map-search@2x.png"/>
          </a>
        </div>

        <div id="map-recenter">
          <a href="#" class="control" ng-click="recenter();">
            <img src="img/map-location@2x.png"/>
          </a>
        </div>

        <div id="map-container"></div>

        <ul id="map-layers" ng-show="visible === 'map-layers'" ng-cloak>
          <li class="map-layer" ng-repeat="layer in mapTileLayers" ng-click="setMapTileLayer(layer.url)">
            <span class="map-layer-name">{{layer.name}}</span>
            <span class="map-layer-visible" ng-show="mapTileLayerUrl === layer.url">
              <img src="img/check@2x.png"/>
            </span>
          </li>
        </ul>
      </div>

      <div id="notifications-view" ng-show="visible === 'notifications'" ng-cloak>
        <div id="content">
          <div id="notifications-info">
            <p>You are currently in The Cuyahoga Valley National Park. Read information from other parks in your region.</p>
          </div>

          <div id="notifications-empty">
            <p>There are no notifications at this time.</p>
          </div>

          <div id="notification-sources" ng-show="notifications.length > 0">
            <div class="source">
            </div>
          </div>
        </div>
      </div>

      <div id="trail-view" ng-show="visible === 'trails'" hm-swipe-left="nextTrail()" hm-swipe-right="previousTrail()" hm-drag-up="drag($event)" hm-drag-down="drag($event)" ng-cloak>
        <div class="nav-and-title">
          <div class="trail-nav">
            <div class="nav-text">
              <p>{{ trails.indexOf(current) + 1 }} of {{ trails.length }}</p>
            </div>
          </div>
          <div class="trail-title-and-attributes">
            <div class="trail-title-field">
              <!-- H3 element is a placeholder. Determine best elem. -->
              <h3 class="trail-title">{{ current.get('name') }}</h3>
              <div class="trail-attributes">
                <!-- p class may need to change as well, similar to h3 above -->
                <p class="trail-attribute-length">{{ current.getLength().toFixed(2) }} mi long</p>
                <div class="trail-attribute-icons">
                  <div class="attribute-icon-box" ng-show="current.canFoot()">
                  <img class="attribute-icon" src="img/foot.png">
                  </div>
                  <div class="attribute-icon-box" ng-show="current.canBicycle()">
                    <img class="attribute-icon" src="img/bike.png">
                  </div>
                  <div class="attribute-icon-box" ng-show="current.canHorse()">
                    <img class="attribute-icon" src="img/horse.png">
                  </div>
                  <div class="attribute-icon-box" ng-show="current.canSki()">
                    <img class="attribute-icon" src="img/ski.png">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="trail-and-trailhead-data">
          <div class="trail-data">
            <div class="trail-body">
              <div class="photo-box">
                <img src="img/photo.png"><img>
              </div>
              <p>{{ current.get('descriptn') }}</p>
            </div>
          </div>
          <div class="trailhead-data">
            <div class="trailhead-title-field">
              <!-- h4 is a placeholder, like the trail title -->
              <img class="trailhead-icon" src="img/marker.png"/></img>
              <p class="trailhead-title">{{ trailHead.get('name') }}</p>
            </div>
            <div class="trailhead-attributes">
              <!-- p is placeholder elem, may need to change -->
              <div class="trailhead-location-attributes">
                <p class="trailhead-distance">{{distance.toFixed(2)}} mi away</p>
                <a class="trailhead-address" href="">{{ trailHead.get('address') }}</a>
              </div>
              <div class="amenities">
                <p class="amenity">Parking</p>
                <p class="amenity">Drinking Water</p>
                <p class="amenity">Restrooms</p>
                <p class="amenity">Info Kiosk</p>
              </div>
              <div class="trailhead-steward">
                <p>Managed by {{ steward.get('name') }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="search-view" ng-show="visible === 'search'" ng-cloak>

        <div id="header">
          <form class="search-form" ng-submit="search(searchKeywords)">
            <div class="search-input-container">
              <span class="search-input-icon">&nbsp;</span>
              <input class="search-input" type="search" ng-model="searchKeywords" value="{{searchKeywords}}" placeholder="Search">
              <a href="#" ng-click="searchKeywords = ''">Clear</a>
            </div>
          </form>
        </div>


        <div id="content">

          <div class="search-info" ng-if="searchKeywords.length > 0">
            <span>Found {{ searchResults.length }} Results For '{{searchKeywords}}'</span>
          </div>

          <div class="search-info" ng-if="!searchKeywords || searchKeywords.length === 0">
            <span>Found {{ searchResults.length }} Trails Near You</span>
          </div>

          <div class="search-results">
            <div class="search-result" ng-repeat="result in searchResults">
              <div class="search-result-header-outer">
                <div class="search-result-header-inner">
                  <p class="name">{{ result.record.get('name') }}</p>
                  <p class="distance">{{ result.distance.toFixed(2) }} miles away</p>
                </div>
              </div>
              <div class="search-subresults">
                <a href="#" ng-click="showTrailHead(result.record)" ng-repeat="subrecord in result.subrecords">
                  <h3>{{ subrecord.get('name') }}</h3>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="footer">
        <a href="#" ng-click="show('map')" ng-show="visible !== 'map' && visible !== 'map-layers'">
          <div class="button button-map">
            <img src="img/map@2x.png"/>
          </div>
        </a>

        <a href="#" ng-click="show('search')" ng-show="visible === 'map' || visible === 'map-layers'" ng-cloak>
          <div class="button button-search">
            <img src="img/search@2x.png"/>
          </div>
        </a>

        <a href="#" ng-click="show('notifications')">
          <div class="button button-info">
            <img src="img/info@2x.png"/>
          </div>
        </a>

        <a href="#" ng-click="show('map-layers')">
          <div class="button button-layer">
            <img src="img/map-stack@2x.png"/>
          </div>
        </a>

        <span class="stretch"></span>
      </div>

    </div>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/lib/fastclick/fastclick.min.js"></script>
    <script type="text/javascript" src="js/lib/angular/angular.min.js"></script>
    <script type="text/javascript" src="js/lib/angular/angular-gestures.min.js"></script>
    <script type="text/javascript" src="js/lib/angular/angular-route.min.js"></script>
    <script type="text/javascript" src="js/lib/leaflet/leaflet.js"></script>
    <script type="text/javascript" src="js/utils.js"></script>
    <script type="text/javascript" src="js/application/controllers.js"></script>
    <script type="text/javascript" src="js/application/routes.js"></script>
    <script type="text/javascript" src="js/application/services.js"></script>
    <script type="text/javascript" src="js/application.js"></script>

  </body>

</html>
